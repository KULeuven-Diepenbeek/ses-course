<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.121.2">
    <meta name="description" content="">


    <link rel="icon" href="../images/favicon.png" type="image/png">

    <title>2. Dependency Management :: Software Engineering Skills</title>

    
    <link href="../css/nucleus.css?1707136371" rel="stylesheet">
    <link href="../css/fontawesome-all.min.css?1707136371" rel="stylesheet">
    <link href="../css/hybrid.css?1707136371" rel="stylesheet">
    <link href="../css/featherlight.min.css?1707136371" rel="stylesheet">
    <link href="../css/perfect-scrollbar.min.css?1707136371" rel="stylesheet">
    <link href="../css/auto-complete.css?1707136371" rel="stylesheet">
    <link href="../css/atom-one-dark-reasonable.css?1707136371" rel="stylesheet">
    <link href="../css/theme.css?1707136371" rel="stylesheet">
    <link href="../css/autonumbering.css?1707136371" rel="stylesheet">
    <link href="../css/devselector.css?1707136371" rel="stylesheet">
    <link href="../css/hugo-theme.css?1707136371" rel="stylesheet">
    <link href="../css/theme-kul.css?1707136371" rel="stylesheet">
    

    <script src="../js/jquery-3.3.1.min.js?1707136371"></script>
    <script src="../js/devselector.js?1707136371"></script>
    <script id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="../dependency-management/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
  <img src="../images/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
  <img src="../images/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../js/lunr.min.js?1707136371"></script>
<script type="text/javascript" src="../js/auto-complete.js?1707136371"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/ses-course\/";
    
</script>
<script type="text/javascript" src="../js/search.js?1707136371"></script>

    
  </div>

    <div class="highlightable">

      <h3><a href="../">Course Contents</a></h3>
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/versiebeheer/" title="1. Versie- en issuebeheer" class="dd-item
        
        
        
        ">
      <a href="../versiebeheer/">
          1. Versie- en issuebeheer
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dependency-management/" title="2. Dependency Management" class="dd-item
        
        active
        
        ">
      <a href="../dependency-management/">
          2. Dependency Management
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dependency-management/cmdline/" title="2.1 Cmdline Java Compiling" class="dd-item ">
        <a href="../dependency-management/cmdline/">
        2.1 Cmdline Java Compiling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dependency-management/gradle/" title="2.2 Java Gradle projecten" class="dd-item ">
        <a href="../dependency-management/gradle/">
        2.2 Java Gradle projecten
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dependency-management/kotlin-gradle/" title="2.3 Kotlin Gradle projecten" class="dd-item ">
        <a href="../dependency-management/kotlin-gradle/">
        2.3 Kotlin Gradle projecten
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/tdd/" title="3. Test Driven Development" class="dd-item
        
        
        
        ">
      <a href="../tdd/">
          3. Test Driven Development
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/tdd/in-de-praktijk/" title="3.1 TDD In de praktijk" class="dd-item ">
        <a href="../tdd/in-de-praktijk/">
        3.1 TDD In de praktijk
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/tdd/capita/" title="3.2 TDD Capita Selecta: Algoritmes" class="dd-item ">
        <a href="../tdd/capita/">
        3.2 TDD Capita Selecta: Algoritmes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/algoritmes/" title="4. Algoritmes en Datastructuren" class="dd-item
        
        
        
        ">
      <a href="../algoritmes/">
          4. Algoritmes en Datastructuren
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/patterns/" title="5. Design Patterns" class="dd-item
        
        
        
        ">
      <a href="../patterns/">
          5. Design Patterns
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/patterns/facade/" title="5.1 Facade" class="dd-item ">
        <a href="../patterns/facade/">
        5.1 Facade
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/patterns/di/" title="5.2 Dependency Injection" class="dd-item ">
        <a href="../patterns/di/">
        5.2 Dependency Injection
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/patterns/singleton/" title="5.3 Singleton" class="dd-item ">
        <a href="../patterns/singleton/">
        5.3 Singleton
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/patterns/decorator/" title="5.4 Decorator" class="dd-item ">
        <a href="../patterns/decorator/">
        5.4 Decorator
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/patterns/factory/" title="5.5 Factory" class="dd-item ">
        <a href="../patterns/factory/">
        5.5 Factory
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/patterns/catching-patterns-in-the-wild/" title="5.6 Catching Patterns in the Wild" class="dd-item ">
        <a href="../patterns/catching-patterns-in-the-wild/">
        5.6 Catching Patterns in the Wild
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/lifecycle/" title="6. Software Management" class="dd-item
        
        
        
        ">
      <a href="../lifecycle/">
          6. Software Management
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/lifecycle/ci/" title="6.1 Continuous Integration &amp; Deployment" class="dd-item ">
        <a href="../lifecycle/ci/">
        6.1 Continuous Integration &amp; Deployment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/lifecycle/management/" title="6.2 Software Management Skills" class="dd-item ">
        <a href="../lifecycle/management/">
        6.2 Software Management Skills
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/extra/" title="Extra informatie" class="dd-item
        
        
        
        ">
      <a href="../extra/">
          Extra informatie
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/extra/software/" title="Gebruikte Software" class="dd-item ">
        <a href="../extra/software/">
        Gebruikte Software
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/sessy/" title="SESsy Library (1) De WebApp" class="dd-item ">
        <a href="../extra/sessy/">
        SESsy Library (1) De WebApp
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/sessy-extending/" title="SESsy Library (2) Uitbreidingen" class="dd-item ">
        <a href="../extra/sessy-extending/">
        SESsy Library (2) Uitbreidingen
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/taak-oss-feedback/" title="Taak 1 OSS Contrib.: Feedback" class="dd-item ">
        <a href="../extra/taak-oss-feedback/">
        Taak 1 OSS Contrib.: Feedback
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/extra/taak-oss/" title="Taak 1: Open Source Contributie" class="dd-item ">
        <a href="../extra/taak-oss/">
        Taak 1: Open Source Contributie
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://studiegidswww.uhasselt.be/opleidingsonderdeel.aspx?a=2023&amp;i=4083&amp;n=4&amp;t=01#anker47379"><i class='fa fa-university'></i>Studiegids</a>
              </li>
          
              <li>
                  <a class="padding" href="https://toledo.kuleuven.be/portal/"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/kuleuven-diepenbeek/ses-course/"><i class='fab fa-github'></i> Course Git Repository</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='../'>Software Engineering Skills</a> > 2. Dependency Management
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
  <div class="wrapper toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#wat-is-een-dependency">Wat is een &lsquo;dependency&rsquo;?</a></li>
    <li><a href="#wie-beheert-dependencies">Wie beheert dependencies?</a>
      <ul>
        <li><a href="#de-ontwikkelaar-manueel">De ontwikkelaar (manueel)</a></li>
        <li><a href="#de-tools-automatisch">De tools (automatisch)</a></li>
      </ul>
    </li>
    <li><a href="#a-nameoefalabo-oefeningen"><a name="oef"></a>Labo oefeningen</a>
      <ul>
        <li><a href="#opgave-1">Opgave 1</a></li>
        <li><a href="#opgave-2">Opgave 2</a></li>
        <li><a href="#opgave-3-extra">Opgave 3 (extra)</a></li>
        <li><a href="#opgave-4-extra">Opgave 4 (extra)</a></li>
      </ul>
    </li>
    <li><a href="#extra-leermateriaal">Extra leermateriaal</a></li>
    <li><a href="#denkvragen">Denkvragen</a></li>
  </ul>
</nav></div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              2. Dependency Management
            </h1>
          

        

        






<article class='content'>
	<p>Lees ook: <a href="../dependency-management/gradle/">Meer uitleg over de Gradle build tool</a>.</p>
<blockquote>
<p><i class="fa fa-question-circle" aria-hidden="true"></i>
Wat is de beste manier om afhankelijkheden te beheren?</p>
</blockquote>
<h2 id="wat-is-een-dependency">Wat is een &lsquo;dependency&rsquo;?</h2>
<p>Een dependency, of <em>afhankelijkheid</em>, is een externe bibliotheek die wordt gebruikt tijdens de ontwikkeling van een toepassing. Tijdens het vak &lsquo;Software ontwerp in Java&rsquo; zijn reeds de volgende externe libraries gebruikt:</p>
<ol>
<li><a href="https://openjfx.io">JavaFX</a></li>
<li><a href="https://github.com/google/gson">Google Gson</a></li>
<li><a href="https://junit.org/junit5/">JUnit</a></li>
</ol>
<p>Het vertrouwen op zo&rsquo;n library houdt in dat een extern bestand, zoals een <code>.jar</code> of <code>.war</code> bestand, download en koppelt wordt aan de applicatie. In Java koppelen we externe libraries door middel van het <code>CLASSPATH</code>: een folder die de compiler gebruikt om te zoeken naar klassen.</p>
<p>Serialisatie met behulp van Gson kan op deze manier:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kt" data-lang="kt"><span style="display:flex;"><span><span style="color:#00a8c8">fun</span> <span style="color:#75af00">main</span><span style="color:#111">(</span><span style="color:#111">args</span><span style="color:#111">:</span> <span style="color:#111">Array</span><span style="color:#111">&lt;</span><span style="color:#111">String</span><span style="color:#111">&gt;)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">val</span> <span style="color:#111">gson</span> <span style="color:#111">=</span> <span style="color:#111">Gson</span><span style="color:#111">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">println</span><span style="color:#111">(</span><span style="color:#111">gson</span><span style="color:#111">.</span><span style="color:#111">toJson</span><span style="color:#111">(</span><span style="color:#ae81ff">1</span><span style="color:#111">))</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Main</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">static</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">main</span><span style="color:#111">(</span><span style="color:#111">String</span><span style="color:#f92672">[]</span> <span style="color:#111">args</span><span style="color:#111">)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">Gson</span> <span style="color:#111">gson</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">Gson</span><span style="color:#111">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">System</span><span style="color:#111">.</span><span style="color:#75af00">out</span><span style="color:#111">.</span><span style="color:#75af00">println</span><span style="color:#111">(</span><span style="color:#111">gson</span><span style="color:#111">.</span><span style="color:#75af00">toJson</span><span style="color:#111">(</span><span style="color:#111">1</span><span style="color:#111">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<p>Bovenstaande <code>Main.java</code> compileren zonder meer geeft de volgende fout:</p>
<pre>
Wouters-MacBook-Air:java wgroeneveld$ javac Main.java
Main.java:3: error: cannot find symbol
        Gson gson = new Gson();
        ^
  symbol:   class Gson
  location: class Main
</pre>
<p>De klasse <code>Gson</code> is immers iets dat we niet hebben zelfgemaakt, maar wensen te importeren via het <code>import com.google.gson.*;</code> statement. Er is een manier nodig om de <a href="https://mvnrepository.com/artifact/com.google.code.gson/gson/2.9.0">gedownloade library</a> te linken met onze bestaande code: <code>javac -cp gson-2.9.0.jar Main.java</code>. Het programma uitvoeren kan met <code>java -cp gson-2.9.0.jar:. Main</code>. Er worden dus 2 zaken aan het classpath meegegeven: de Google jar, en de huidige directory (<code>.</code>), om <code>Main.class</code> terug te vinden.</p>

<div class="notices warning" ><p>Java classpath separators zijn <a href="https://howtodoinjava.com/java/basics/java-classpath/">OS-specifiek</a>! Windows: <code>;</code> in plaats van Unix: <code>:</code>.</p>
</div>

<p>Dit programma kan schematisch worden voorgesteld als volgt:</p>

<div class="mermaid" align="center" >
	
graph LR;
    A["Main klasse"]
    C["Gson 2.9.0"]
    A -->|dependent on| C

</div>
<p>De dependency in bovenstaand voorbeeld is <code>gson-2.9.0.jar</code>. Een gemiddelde Java applicatie heeft echter <strong>meer dan 10 dependencies!</strong> Het beheren van deze bestanden en de verschillende versies (major, minor, revision) geeft vaak conflicten die beter beheerd kunnen worden door tools dan door de typische vergeetachtigheid van mensen. Dit kluwen aan afhankelijkheden, dat erg snel onhandelbaar kan worden, noemt men een <a href="https://en.wikipedia.org/wiki/Dependency_hell">Dependency Hell</a>. Er zijn varianten: <a href="https://en.wikipedia.org/wiki/DLL_Hell">DLL Hell</a> sinds 16-bit Windows versies, RPM Hell voor Redhat Linux distributies, en <a href="https://en.wikipedia.org/wiki/Java_Classloader#JAR_hell">JAR Hell</a> voor Java projecten.</p>
<p>Zie ook xkcd&rsquo;s <a href="https://www.explainxkcd.com/wiki/index.php/1579:_Tech_Loops">Tech Loops</a> rommelboeltje:</p>
<p><figure>
	<a href="../img/tech_loops.png" data-featherlight="image">
		<img src="../img/tech_loops.png"  >
	</a>
	
</figure>
</p>
<h2 id="wie-beheert-dependencies">Wie beheert dependencies?</h2>
<h3 id="de-ontwikkelaar-manueel">De ontwikkelaar (manueel)</h3>
<p>De eenvoudigste manier om een library te gebruiken is de volgende procedure te volgen:</p>
<ol>
<li>Navigeer naar de website van de library en download deze in een bepaalde map, zoals <code>/lib</code>.</li>
<li>Importeer de juiste klasses met het <code>import</code> statement.</li>
<li>Compileer de code door middel van het <code>-cp dependency1.jar</code> argument.</li>
</ol>
<p>Voor kleine programma&rsquo;s met enkele libraries is dit meer dan voldoende. Het kost echter redelijk veel moeite om de juiste versie te downloaden: stap 1 kost meestal meer dan 5 minuten werk.</p>

<div class="notices note" ><p>Merk op dat jar files in een submap steken de syntax van de <code>-cp</code> parameter lichtjes wijzigt: bij compileren wordt het <code>javac -cp lib/* bla.java</code> en bij uitvoeren wordt het <code>java -cp &quot;lib/*:.&quot; bla</code>. Zonder de toegevoegde punt (<code>.</code>) bij het <code>java</code> commando wordt de main methode in <code>bla</code> zelf niet gevonden. Wildcards zijn toegestaan. Zie ook <a href="https://dev.to/martingaston/understanding-the-java-classpath-building-a-project-manually-3c3l">Understanding the Java Classpath</a>. In de praktijk worden build tools als Gradle gebruikt om projecten automatisch te builden, inclusief het doorgeven van de juiste parameters/dependencies.</p>
</div>

<h3 id="de-tools-automatisch">De tools (automatisch)</h3>
<h4 id="apache-maven">Apache Maven</h4>
<p><a href="https://en.wikipedia.org/wiki/Apache_Maven">Maven</a> is een build tool van de Apache Foundation die zowel de manier waarop de software wordt gecompileerd als zijn afhankelijkheden beheert. Maven is de voorloper van Gradle en bestaat reeds 15 jaar.</p>
<p>Een Maven project heeft een <code>pom.xml</code> bestand (Project Object Model), waarin in XML formaat wordt beschreven hoe de structuur er uit ziet, welke libraries men gebruikt, en zo voort:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;project&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;modelVersion&gt;</span>4.0.0<span style="color:#f92672">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;groupId&gt;</span>com.mycompany.app<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;artifactId&gt;</span>my-app<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;version&gt;</span>1.0<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;groupId&gt;</span>junit<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;artifactId&gt;</span>junit<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;version&gt;</span>3.8.1<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;scope&gt;</span>test<span style="color:#f92672">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/project&gt;</span>
</span></span></code></pre></div><p>Maven is erg populair in de Java wereld, waardoor er verschillende servers zijn die deze <code>pom</code> bestanden samen met hun libraries beheren, zoals de <a href="https://mvnrepository.com">Central Maven Repository</a> en de <a href="https://maven.google.com/web/index.html">Google Maven Repository</a> mirrors. De syntax van het configuratiebestand is echter erg onoverzichtelijk, en er zijn ondertussen betere alternatieven beschikbaar, zoals Gradle.</p>
<h4 id="gradle">Gradle</h4>
<p><strong>Belangrijk</strong>: neem dit eerst door - <a href="../dependency-management/gradle/">Meer informatie over Gradle</a>.</p>
<p>Gradle is net zoals Maven een automatisatie tool voor de Java wereld (en daarbuiten), die verder bouwt op de populariteit van Maven door bijvoorbeeld compatibel te zijn met de Repository servers, maar de grootste pijnpunten wegneemt: een slorig configuratiebestand in XML, en complexe command-line scripts.</p>
<p>De volgende procedure volg je als je Gradle dependencies laat beheren:</p>
<ol>
<li>Zoek op de <a href="https://mvnrepository.com">Maven Repository</a> website naar de gewenste library.</li>
<li>Voeg één regel toe in je <code>gradle.build</code> bestand, in het dependencies stuk:</li>
</ol>
<pre tabindex="0"><code>dependencies {
    implementation &#39;com.google.code.gson:gson:2.9.0&#39;
}
</code></pre><p>Bij het uitvoeren van <code>gradlew</code> download Gradle automatisch de juiste opgegeven versie. Gradle bewaart lokale kopies van libraries in een submap van je home folder: <code>~/.gradle</code>. Dit kan je controleren door in IntelliJ naar File -&gt; Project Structure te gaan en te klikken op &ldquo;Libraries&rdquo;:</p>
<p><figure>
	<a href="../img/gradlepath.png" data-featherlight="image">
		<img src="../img/gradlepath.png"   title="Het lokale path naar de auto-cached libraries.">
	</a>
	
		<figcaption>Het lokale path naar de auto-cached libraries.</figcaption>
	
</figure>
</p>
<p>Voordelen van het gebruik van deze methode:</p>
<ol>
<li>Het zoeken van libraries beperkt zich tot één centrale (Maven Repository) website, waar alle verschillende versie revisies duidelijk worden vermeld.</li>
<li>Het downloaden van libraries beperkt zich tot één centrale locatie op je harde schijf: 10 verschillende Java projecten die gebruik maken van Gson vereisen linken naar dezelfde gradle bestanden.</li>
<li>Het beheren van dependencies en versies beperkt zich tot één centraal configuratiebestand: <code>build.gradle</code>. Dit is (terecht) een <strong>integraal deel van het project</strong>!</li>
</ol>
<p>Lees ook: <a href="https://docs.gradle.org/current/userguide/declaring_dependencies.html">Declaring dependencies</a> in de Gradle docs.</p>
<h4 id="custom-repository-urls-voorzien">Custom Repository URLs voorzien</h4>
<p>Veelgebruikte libraries zijn eenvoudig te vinden via de <a href="https://mvnrepository.com">Central Maven Repository</a>. Wanneer echter een eigen library werd gecompileerd, die dan in andere projecten worden gebruikt, schiet deze methode tekort: interne libraries zijn uiteraard niet op een publieke server gepubliceerd.</p>
<p>Gradle voorziet gelukkig genoeg een eenvoudige manier om <a href="https://docs.gradle.org/current/userguide/declaring_repositories.html">repository websites toe te voegen</a>, met de volgende eenvoudige syntax:</p>
<pre>
repositories {
  mavenCentral()
}
</pre>
<p><code>mavenCentral()</code>, <code>jcenter()</code>, en <code>google()</code> zijn ingebouwde repositories. Eigen Maven folders en URLs toevoegen kan ook, evenals een lokale folder:
<a name="flatdir"></a></p>
<pre>
repositories {
    maven {
        // dit kan zowel een folder als HTTP(s) URL zijn
        url "/Users/wgroeneveld/development/java/maven-repo"
    }
    flatDir {
        dirs 'lib'
    }
}
</pre>
<h4 id="transitieve-dependencies">Transitieve dependencies</h4>
<p>Er zijn twee types van dependencies: <strong>directe</strong> (1) en <strong>transitieve</strong> (2). Een directe dependency is een afhankelijkheid die het project nodig heeft, zoals het gebruik van Gson, waarbij dit in de <code>dependencies {}</code> config zit. Een <em>transitieve</em> of indirecte dependency is een dependency van een dependency. In de oefening hieronder maken we een project (1) aan, dat een project (2) gebruikt, dat Gson gebruikt. In project 1 is project 2 een directe dependency, en Gson een transitieve. In Project 2 is Gson een directe dependency (en komt project 1 niet voor):</p>

<div class="mermaid" align="center" >
	
graph LR;
    A[Project een]
    B[Project twee]
    C[Gson]
    A --> B
    B --> C
    A -.-> C

</div>
<p>Het is <strong>geen goed idee</strong> om bij fouten in uitvoering de zachte link (stippellijn) te veranderen in een harde, door dit als directe dependency toe te voegen. Gradle <a href="https://docs.gradle.org/current/userguide/dependency_management.html#controlling_transitive_dependencies">biedt hier alternatieven voor</a>. Het voor de hand liggende alternatief is van de library ook een Maven module te maken en deze te uploaden naar een (lokale) repository.</p>
<h4 id="publiceren-naar-een-maven-repository">Publiceren naar een Maven Repository</h4>
<p>Klik op &lsquo;<a href="https://mvnrepository.com/artifact/com.google.code.gson/gson/2.9.0">View All</a>&rsquo; bij de Gson module op de MVN Central Repo om te inspecteren welke bestanden typisch worden aangeleverd in een Maven repository:</p>
<ol>
<li>De library zelf, in een bepaalde versie.</li>
<li>Eventueel de javadoc en/of sources als aparte jars.</li>
<li>Een <code>.pom</code> XML bestand.</li>
<li>metadata als <code>md5</code> checksums.</li>
</ol>
<p>Het XML bestand beschrijft welke afhankelijkheden deze module op zich heeft. Zo kan een hele <strong>dependency tree</strong> worden opgebouwd! Het beheren van <em>alle</em> afhankelijkheden is complexer dan op het eerste zicht lijkt, en laat je dus beter over aan deze gespecialiseerde tools. Google heeft voor Gson enkel Junit als test dependency aangeduid:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;groupId&gt;</span>junit<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;artifactId&gt;</span>junit<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;scope&gt;</span>test<span style="color:#f92672">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependencies&gt;</span>
</span></span></code></pre></div><p>Grote projecten kunnen makkelijk afhankelijk zijn van tientallen libraries, die op hun beurt weer afhankelijk zijn van libraries. Een typische grote webapplicatie geschreven in java heeft de volgende dependency tree, die opgevraagd kan worden via Gradle of Maven:</p>
<p><figure>
	<a href="../img/teaching/ses/deptree.png" data-featherlight="image">
		<img src="../img/teaching/ses/deptree.png"  >
	</a>
	
</figure>
</p>
<p>Gebruik hiervoor de task <code>dependencies</code>: <code>./gradlew dependencies</code>. Detailinformatie voor specifieke dependencies kunnen worden opgevraagd met de <code>dependencyInsight</code> task. Zie ook: <a href="https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html">Viewing and debugging dependencies</a> in de Gradle docs.</p>
<p>Gradle voorziet een plugin genaamd &lsquo;<em>maven-publish</em>&rsquo; die deze bestanden automatisch aanmaakt. Activeer de plugin en voeg een <code>publishing</code> tag toe met de volgende properties:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kt" data-lang="kt"><span style="display:flex;"><span><span style="color:#111">plugins</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">java</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">kotlin</span><span style="color:#111">(</span><span style="color:#d88200">&#34;jvm&#34;</span><span style="color:#111">)</span> <span style="color:#111">version</span> <span style="color:#d88200">&#34;1.6.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">`</span><span style="color:#111">maven</span><span style="color:#111">-</span><span style="color:#111">publish</span><span style="color:#960050;background-color:#1e0010">`</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">publishing</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">publications</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">create</span><span style="color:#111">&lt;</span><span style="color:#111">MavenPublication</span><span style="color:#111">&gt;(</span><span style="color:#d88200">&#34;maven&#34;</span><span style="color:#111">)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">groupId</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;be.kuleuven&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">artifactId</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;projectnaam&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">version</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;1.0-SNAPSHOT&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">from</span><span style="color:#111">(</span><span style="color:#111">components</span><span style="color:#111">[</span><span style="color:#d88200">&#34;java&#34;</span><span style="color:#111">])</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">repositories</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">maven</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">url</span> <span style="color:#111">=</span> <span style="color:#111">uri</span><span style="color:#111">(</span><span style="color:#111">layout</span><span style="color:#111">.</span><span style="color:#111">buildDirectory</span><span style="color:#111">.</span><span style="color:#111">dir</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/Users/wgroeneveld/development/java/maven-repo&#34;</span><span style="color:#111">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#111">plugins</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">id</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#111">java</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">id</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#111">maven</span><span style="color:#f92672">-</span><span style="color:#111">publish</span><span style="color:#960050;background-color:#1e0010">&#39;</span> <span style="color:#75715e">// toevoegen!</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">publishing</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">publications</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">maven</span><span style="color:#111">(</span><span style="color:#111">MavenPublication</span><span style="color:#111">)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">groupId</span> <span style="color:#f92672">=</span> <span style="color:#111">project</span><span style="color:#111">.</span><span style="color:#75af00">group</span><span style="color:#111">.</span><span style="color:#75af00">toString</span><span style="color:#111">()</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">version</span> <span style="color:#f92672">=</span> <span style="color:#111">version</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">artifactId</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#111">projectnaam</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">from</span> <span style="color:#111">components</span><span style="color:#111">.</span><span style="color:#75af00">java</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">repositories</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">maven</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#111">url</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;/Users/wgroeneveld/development/java/maven-repo&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<p>Windows gebruikers dienen in de <code>url</code> value te werken met dubbele backslashes (<code>\\</code>) in plaats van forward slashes (<code>/</code>) om naar het juiste pad te navigeren.</p>

<div class="notices warning" ><p><strong>Opgelet met Kotlin-specifieke build files</strong>: Als je een <code>build.gradle.kts</code> bestand gebruikt (Gradle in Kotlin-script formaat), is de syntax sterk gewijzigd (klik dan hierboven op de tab &ldquo;Kotlin&rdquo;). Zie ook <a href="https://docs.gradle.org/current/userguide/publishing_maven.html">de officiele Gradle documentatie</a> over how to publish in Maven.</p>
</div>

<p>Deze uitbreiding voegt de target <code>publish</code> toe aan Gradle. Dus: <code>./gradlew publish</code> publiceert de nodige bestanden in de aangegeven folder. Een Gradle project die daar gebruik van wenst te maken dient enkel een tweede Maven Repository plaats te definiëren:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kt" data-lang="kt"><span style="display:flex;"><span><span style="color:#111">repositories</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">mavenCentral</span><span style="color:#111">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">maven</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">url</span> <span style="color:#111">=</span> <span style="color:#111">uri</span><span style="color:#111">(</span><span style="color:#111">layout</span><span style="color:#111">.</span><span style="color:#111">buildDirectory</span><span style="color:#111">.</span><span style="color:#111">dir</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/Users/wgroeneveld/development/java/maven-repo&#34;</span><span style="color:#111">))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#111">repositories</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">mavenCentral</span><span style="color:#111">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">maven</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">url</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;/Users/wgroeneveld/development/java/maven-repo&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<h2 id="a-nameoefalabo-oefeningen"><a name="oef"></a>Labo oefeningen</h2>
<p>Neem dit eerst door: <a href="../dependency-management/gradle/">Meer informatie over Gradle</a>.</p>
<h3 id="opgave-1">Opgave 1</h3>
<p>Ontwerp een eenvoudige library genaamd &lsquo;<em>scorebord</em>&rsquo; die scores kan bijhouden voor bordspelletjes. Deze library kan kan gebruikt worden door toekomstige digitale Java bordspellen. In een Scorebord kan je spelers toevoegen door middel van een naam en een score. Er is een mogelijkheid om de huidige score van een speler op te vragen, en de winnende speler. Deze gegevens worden met behulp van Gson in een <code>JSON</code> bestand bewaard, zodat bij het heropstarten van een spel de scores behouden blijven. <br/>De API (publieke methodes) van de library ziet er zo uit:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kt" data-lang="kt"><span style="display:flex;"><span><span style="color:#00a8c8">data</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Speler</span><span style="color:#111">(</span><span style="color:#00a8c8">val</span> <span style="color:#111">naam</span><span style="color:#111">:</span> <span style="color:#111">String</span><span style="color:#111">,</span> <span style="color:#00a8c8">val</span> <span style="color:#111">score</span><span style="color:#111">:</span> <span style="color:#111">Int</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">class</span> <span style="color:#75af00">Scorebord</span><span style="color:#111">()</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">fun</span> <span style="color:#75af00">voegToe</span><span style="color:#111">(</span><span style="color:#111">x</span><span style="color:#111">:</span> <span style="color:#111">String</span><span style="color:#111">,</span> <span style="color:#111">huidigeScore</span><span style="color:#111">:</span> <span style="color:#111">int</span><span style="color:#111">)</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">fun</span> <span style="color:#75af00">getTotaleScore</span><span style="color:#111">(</span><span style="color:#111">x</span><span style="color:#111">:</span> <span style="color:#111">String</span><span style="color:#111">):</span> <span style="color:#111">Int</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">fun</span> <span style="color:#75af00">getWinnaar</span><span style="color:#111">():</span> <span style="color:#111">String</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Speler</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#111">String</span> <span style="color:#75af00">getNaam</span><span style="color:#111">()</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">int</span> <span style="color:#75af00">getScore</span><span style="color:#111">()</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">Scorebord</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">voegToe</span><span style="color:#111">(</span><span style="color:#111">String</span> <span style="color:#111">x</span><span style="color:#111">,</span> <span style="color:#00a8c8">int</span> <span style="color:#111">huidigeScore</span><span style="color:#111">)</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">int</span> <span style="color:#75af00">getTotaleScore</span><span style="color:#111">(</span><span style="color:#111">String</span> <span style="color:#111">x</span><span style="color:#111">)</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#111">String</span> <span style="color:#75af00">getWinnaar</span><span style="color:#111">()</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<p>De klasse <code>Speler</code> is een intern hulpmiddel om te serialiseren. <br/>
Extra methodes toevoegen mag altijd. De constructor van het scorebord leest automatisch de score van de vorige keer in, als dat bestand bestaat. Denk bij de implementatie aan een collectie om spelers en hun scores bij te houden. Maak via IntelliJ een nieuw <strong>Gradle - Java project</strong>. Groupid: <code>be.kuleuven</code>. Arifactid: <code>scorebord</code>. Vergeet niet op &lsquo;refresh&rsquo; te drukken wanneer je een dependency toevoegt (linksboven op onderstaande screenshot):</p>
<p><figure>
	<a href="../img/teaching/ses/gradle-refresh.png" data-featherlight="image">
		<img src="../img/teaching/ses/gradle-refresh.png"  >
	</a>
	
</figure>
</p>
<p>Met het commando <code>gradlew jar</code> creëer je het bestand <code>scorebord-1.0-SNAPSHOT.jar</code> in de <code>build/libs</code> folder.</p>

<div class="notices note" ><p>Denk na over het bijhouden van <code>Speler</code>s in <code>Scorebord</code>. Een simpele <code>ArrayList</code> zal volstaan. Gebruik <code>Gson</code> in een methode als <code>save()</code> om gewoon de lijst (of het object zelf) naar de HDD te serialiseren. Tip: <a href="https://www.logicbig.com/how-to/code-snippets/jcode-java-io-files-write.html">java.nio.files.write</a>.</p>
</div>

<p>Tip: indien de Gralde wrapper een oudere versie aanmaakt (&lt; v6), update met <code>gradlew wrapper --gradle-version 6.0.1</code>. Gradle versie <code>6</code> of groter is vereist voor JDK <code>13</code> of groter.</p>
<h3 id="opgave-2">Opgave 2</h3>
<p>Maak een nieuw Gradle project aan genaamd &lsquo;<em>scorebord-darts</em>&rsquo;, dat bovenstaand scorebord project als een library gaat gebruiken. Bewaar de jar file lokaal in een &rsquo;lib&rsquo; folder en instrueer Gradle zo dat dit als <code>flatDir</code> repository wordt opgenomen (<a href="#flatdir">zie boven</a>). Het tweede project heeft als Artifactid <code>scorebord-darts</code>. De klasse <code>DartsGame</code> ziet er zo uit:</p>
<div class="devselect">
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kt" data-lang="kt"><span style="display:flex;"><span><span style="color:#00a8c8">class</span> <span style="color:#75af00">DartsGame</span><span style="color:#111">()</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">private</span> <span style="color:#00a8c8">val</span> <span style="color:#111">player</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;jos&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">fun</span> <span style="color:#75af00">throwDart</span><span style="color:#111">()</span> <span style="color:#111">{</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">DartsGame</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">private</span> <span style="color:#111">String</span> <span style="color:#111">player</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;jos&#34;</span><span style="color:#111">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">throwDart</span><span style="color:#111">()</span> <span style="color:#111">{}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></div>
<p>Als de dependencies goed liggen, kan je een nieuw <code>Scorebord</code> aanmaken, en herkent IntelliJ dit met CTRL+Space:</p>
<p><figure>
	<a href="../img/teaching/ses/gradle-dependency-used.png" data-featherlight="image">
		<img src="../img/teaching/ses/gradle-dependency-used.png"  >
	</a>
	
</figure>
</p>
<p>Maak een <code>Main</code> klasse met een <code>public static void main(String[] args)</code> methode, waarin een darts spel wordt opgezet, en een aantal keer ter test wordt &lsquo;gegooid&rsquo;. Druk de totale score en de winnaar af, dat opgevraagd kan worden via het spelbord. Krijg je deze klasse opgestart?</p>
<pre>
> Task :Main.main() FAILED
Exception in thread "main" java.lang.NoClassDefFoundError: com/google/gson/Gson
    at be.kuleuven.scorebord.Scorebord.<init>(Scorebord.java:24)
    at be.kuleuven.DartsGame.<init>(DartsGame.java:11)
    at be.kuleuven.Main.main(Main.java:6)
Caused by: java.lang.ClassNotFoundException: com.google.gson.Gson
    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583)
    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
    ... 3 more

Caused by: java.lang.ClassNotFoundException: com.google.gson.Gson

Execution failed for task ':Main.main()'.
> Process 'command '/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1
</pre>
<p>Dit werkt <em>niet</em> omdat we een library gebruiken (ScoreBord), die op zijn beurt een library gebruikt (Gson), die niet in onze huidige Gradle file is gedefiniëerd. Om dit op te lossen dienen we over te schakelen naar een lokale Maven repository, die ook transitieve dependencies automatisch inlaadt. Verwijder de <code>flatDir</code> en voeg een lokale maven URL toe. Publiceer in het scorebord project naar diezelfde URL volgens de instructies van de <code>maven-publish</code> plugin.</p>
<h3 id="opgave-3-extra">Opgave 3 (extra)</h3>
<p>Bovenstaande screenshot geeft aan dat IntelliJ methodes herkent van de <code>Scorebord</code> klasse. Er is echter geen javadoc voorzien die uitlegt wat welke parameter doet. Voorzie javadoc bij alle publieke methodes. Dit moet ook mee worden verpakt in het <code>jar</code> bestand, zodat het ander project deze kan herkennen. Probeer uit te zoeken wat je hier voor moet doen in het <code>build.gradle</code> bestand.</p>
<h3 id="opgave-4-extra">Opgave 4 (extra)</h3>
<p>Genereer met behulp van Gradle van de <a href="../dependency-management/sessy">SESsy library</a> een dependency tree en inspecteer welke dpendencies transitief zijn en welke direct.</p>
<h2 id="extra-leermateriaal">Extra leermateriaal</h2>
<ul>
<li>Opfriscursus Java nodig? Neem je INF1 cursus er terug bij, of volg een van de talrijke online cursussen, zoals <a href="https://www.codecademy.com/learn/learn-java/">Learn Java</a> van Codeacademy. Concepten zoals packages, structuur, imports, klasses, objecten en instances, containers, &hellip; zijn voor dit vak elementaire basiskennis.</li>
</ul>
<h2 id="denkvragen">Denkvragen</h2>
<ul>
<li>Hoe zou je transitieve dependencies handmatig kunnen beheren? Wat zijn de voor- en nadelen?</li>
<li>Wat gebeurt er als project1-1.0 afhankelijk is van lib1-1.0 en lib1-2.0, en lib1-1.0 van lib2-1.0 - een oudere versie dus?</li>
<li>Heb je altijd test dependencies nodig? Wat gebeurt er met een test dependency, libtest-1.0, van lib1-1.0, als project1-1.0 afhankelijk is van lib1-1.0?</li>
<li>Als ik publiceer naar een lokale folder, welke bestanden zijn dan absoluut noodzakelijk voor iemand om mijn library te kunnen gebruiken?</li>
</ul>

</article>




<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../versiebeheer/" title="1. Versie- en issuebeheer"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../dependency-management/cmdline/" title="2.1 Cmdline Java Compiling" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../js/clipboard.min.js?1707136371"></script>
    <script src="../js/perfect-scrollbar.min.js?1707136371"></script>
    <script src="../js/perfect-scrollbar.jquery.min.js?1707136371"></script>
    <script src="../js/jquery.sticky.js?1707136371"></script>
    <script src="../js/featherlight.min.js?1707136371"></script>
    <script src="../js/modernizr.custom-3.6.0.js?1707136371"></script>
    <script src="../js/learn.js?1707136371"></script>
    <script src="../js/hugo-learn.js?1707136371"></script>
    <script src="../js/mermaid.min.js?1707136371"></script>
    <script>
    window.MathJax = {
      chtml: {
        scale: 2,                      
        minScale: .5,                  
        matchFontHeight: true,         
        mtextInheritFont: false,       
        merrorInheritFont: true,       
        mathmlSpacing: false,          
        skipAttributes: {},            
        exFactor: .5,                  
        displayAlign: 'center',        
        displayIndent: '0'             
      }
    };
    </script>
    
    

  </body>
</html>
